{
	"name": "RoverBehavior",
	"events": [
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-start-of-layout",
					"objectClass": "System",
					"sid": 954088805076023
				}
			],
			"actions": [
				{
					"id": "create-object",
					"objectClass": "System",
					"sid": 484689377530595,
					"parameters": {
						"object-to-create": "RoverTarget",
						"layer": "\"WorldGround\"",
						"x": "-100",
						"y": "-100",
						"create-hierarchy": false
					}
				},
				{
					"id": "set-max-speed",
					"objectClass": "RoverPlaceholder",
					"sid": 405013244198390,
					"behaviorType": "MoveTo",
					"parameters": {
						"max-speed": "RoverPlaceholder.RoverAbsoluteMaxSpeed"
					}
				},
				{
					"id": "play",
					"objectClass": "Audio",
					"sid": 980624987235347,
					"parameters": {
						"audio-file": "Driveloop1LOUDER",
						"loop": "looping",
						"volume": "-Infinity",
						"tag-optional": "\"drivingsound\""
					}
				}
			],
			"sid": 202999105665634
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "is-touching-object",
					"objectClass": "Touch",
					"sid": 492892026841452,
					"parameters": {
						"object": "TouchInputObjects"
					}
				},
				{
					"id": "compare-boolean-eventvar",
					"objectClass": "System",
					"sid": 406338670925405,
					"parameters": {
						"variable": "isPlayerRoverInteractionEnabled"
					}
				},
				{
					"id": "compare-boolean-eventvar",
					"objectClass": "System",
					"sid": 789474505943321,
					"parameters": {
						"variable": "isGameOver"
					},
					"isInverted": true
				},
				{
					"id": "layer-is-visible",
					"objectClass": "System",
					"sid": 284524093902159,
					"parameters": {
						"layer": "6"
					},
					"isInverted": true
				},
				{
					"id": "layer-is-visible",
					"objectClass": "System",
					"sid": 523481444984911,
					"parameters": {
						"layer": "7"
					},
					"isInverted": true
				},
				{
					"id": "layer-is-visible",
					"objectClass": "System",
					"sid": 655526807615645,
					"parameters": {
						"layer": "5"
					},
					"isInverted": true
				}
			],
			"actions": [
				{
					"id": "set-position",
					"objectClass": "RoverTarget",
					"sid": 464454870754090,
					"parameters": {
						"x": "Touch.X",
						"y": "Touch.Y"
					}
				},
				{
					"id": "move-to-object",
					"objectClass": "RoverPlaceholder",
					"sid": 467517095850707,
					"behaviorType": "MoveTo",
					"parameters": {
						"object": "RoverTarget",
						"image-point": "0",
						"mode": "direct"
					}
				}
			],
			"sid": 856755711598844
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "every-tick",
					"objectClass": "System",
					"sid": 103463149969340
				},
				{
					"id": "compare-boolean-eventvar",
					"objectClass": "System",
					"sid": 592302410737589,
					"parameters": {
						"variable": "isGameOver"
					},
					"isInverted": true
				}
			],
			"actions": [
				{
					"id": "subtract-from-eventvar",
					"objectClass": "System",
					"sid": 474834703450618,
					"parameters": {
						"variable": "BatteryEnergy",
						"value": "ceil(RoverPlaceholder.MoveTo.Speed) * dt * 0.1"
					}
				},
				{
					"id": "set-position-to-another-object",
					"objectClass": "Rover",
					"sid": 301932000434326,
					"parameters": {
						"object": "RoverPlaceholder",
						"image-point-optional": "0"
					}
				},
				{
					"id": "set-angle",
					"objectClass": "Rover",
					"sid": 370945752114799,
					"parameters": {
						"angle": "RoverPlaceholder.Angle"
					}
				},
				{
					"id": "set-eventvar-value",
					"objectClass": "System",
					"sid": 184016930270601,
					"parameters": {
						"variable": "RoverAngleSpeed",
						"value": "(RoverPlaceholder.MoveTo.MovingAngle-LastRoverAngle)/dt"
					}
				},
				{
					"id": "set-eventvar-value",
					"objectClass": "System",
					"sid": 566680745967665,
					"parameters": {
						"variable": "LastRoverAngle",
						"value": "RoverPlaceholder.MoveTo.MovingAngle"
					}
				},
				{
					"id": "set-position",
					"objectClass": "RoverShadow",
					"sid": 165797771887878,
					"parameters": {
						"x": "RoverPlaceholder.X + 3",
						"y": "RoverPlaceholder.Y + 3"
					}
				},
				{
					"id": "set-angle",
					"objectClass": "RoverShadow",
					"sid": 768538376519416,
					"parameters": {
						"angle": "RoverPlaceholder.Angle"
					}
				},
				{
					"id": "set-animation",
					"objectClass": "RoverShadow",
					"sid": 301338422019993,
					"parameters": {
						"animation": "Rover.AnimationName",
						"from": "beginning"
					}
				},
				{
					"id": "set-animation-frame",
					"objectClass": "RoverShadow",
					"sid": 767177670886291,
					"parameters": {
						"frame-number": "Rover.AnimationFrame"
					}
				},
				{
					"id": "set-max-speed",
					"objectClass": "RoverPlaceholder",
					"sid": 419819261237405,
					"behaviorType": "MoveTo",
					"parameters": {
						"max-speed": "RoverPlaceholder.RoverAbsoluteMaxSpeed * (BatteryEnergy / MaxBatteryEnergy)"
					}
				},
				{
					"id": "scroll-to-position",
					"objectClass": "System",
					"sid": 979652406845505,
					"parameters": {
						"x": "RoverPlaceholder.X - Computer.LeftInset/2 + Computer.RightInset/2",
						"y": "RoverPlaceholder.Y - Computer.TopInset/2 + Computer.BottomInset/2"
					}
				}
			],
			"sid": 107793892035618
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "is-moving",
					"objectClass": "RoverPlaceholder",
					"sid": 556868525232068,
					"behaviorType": "MoveTo"
				},
				{
					"id": "compare-boolean-eventvar",
					"objectClass": "System",
					"sid": 529992198284934,
					"parameters": {
						"variable": "isGameOver"
					},
					"isInverted": true
				}
			],
			"actions": [
				{
					"id": "set-animation",
					"objectClass": "Rover",
					"sid": 752352443381666,
					"parameters": {
						"animation": "\"rolling\"",
						"from": "current-frame"
					}
				},
				{
					"id": "set-volume",
					"objectClass": "Audio",
					"sid": 596636919894723,
					"parameters": {
						"tag": "\"drivingsound\"",
						"db": "-10"
					}
				},
				{
					"id": "set-playback-rate",
					"objectClass": "Audio",
					"sid": 207362089249807,
					"parameters": {
						"tag": "\"drivingsound\"",
						"playback-rate": "RoverPlaceholder.MoveTo.Speed / RoverPlaceholder.RoverAbsoluteMaxSpeed"
					}
				}
			],
			"sid": 132601009957553
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-arrived",
					"objectClass": "RoverPlaceholder",
					"sid": 502236373119033,
					"behaviorType": "MoveTo"
				},
				{
					"id": "compare-boolean-eventvar",
					"objectClass": "System",
					"sid": 397634805674391,
					"parameters": {
						"variable": "isGameOver"
					},
					"isInverted": true
				}
			],
			"actions": [
				{
					"id": "set-animation",
					"objectClass": "Rover",
					"sid": 611137338120259,
					"parameters": {
						"animation": "\"still\"",
						"from": "current-frame"
					}
				},
				{
					"id": "set-volume",
					"objectClass": "Audio",
					"sid": 863832628545035,
					"parameters": {
						"tag": "\"drivingsound\"",
						"db": "-Infinity"
					}
				}
			],
			"sid": 975517574231169
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "compare-eventvar",
					"objectClass": "System",
					"sid": 206373535942539,
					"parameters": {
						"variable": "RoverAngleSpeed",
						"comparison": 2,
						"value": "-50"
					}
				}
			],
			"actions": [
				{
					"id": "set-animation",
					"objectClass": "Rover",
					"sid": 490529487122457,
					"parameters": {
						"animation": "\"left\"",
						"from": "beginning"
					}
				}
			],
			"sid": 989591317886604
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "compare-eventvar",
					"objectClass": "System",
					"sid": 269728401978947,
					"parameters": {
						"variable": "RoverAngleSpeed",
						"comparison": 4,
						"value": "50"
					}
				}
			],
			"actions": [
				{
					"id": "set-animation",
					"objectClass": "Rover",
					"sid": 350713736902704,
					"parameters": {
						"animation": "\"right\"",
						"from": "beginning"
					}
				}
			],
			"sid": 455469305590896
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-tap",
					"objectClass": "Touch",
					"sid": 267210407293911
				},
				{
					"id": "layer-is-visible",
					"objectClass": "System",
					"sid": 785339687437998,
					"parameters": {
						"layer": "\"GameOver\""
					}
				},
				{
					"id": "compare-boolean-eventvar",
					"objectClass": "System",
					"sid": 104345911657412,
					"parameters": {
						"variable": "isGameOver"
					}
				}
			],
			"actions": [
				{
					"id": "reset-global-variables",
					"objectClass": "System",
					"sid": 811084332832721
				},
				{
					"id": "restart-layout",
					"objectClass": "System",
					"sid": 558048172488491
				},
				{
					"id": "set-layer-visible",
					"objectClass": "System",
					"sid": 840148100850182,
					"parameters": {
						"layer": "\"GameOver\"",
						"visibility": "invisible"
					}
				}
			],
			"sid": 595123706738236
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-tap",
					"objectClass": "Touch",
					"sid": 810905881112624
				},
				{
					"id": "layer-is-visible",
					"objectClass": "System",
					"sid": 907358351043071,
					"parameters": {
						"layer": "\"VictoryPicture\""
					}
				}
			],
			"actions": [
				{
					"id": "reset-global-variables",
					"objectClass": "System",
					"sid": 217981775025627
				},
				{
					"id": "restart-layout",
					"objectClass": "System",
					"sid": 166188432590976
				},
				{
					"id": "set-layer-visible",
					"objectClass": "System",
					"sid": 792167742939623,
					"parameters": {
						"layer": "\"Victory\"",
						"visibility": "invisible"
					}
				}
			],
			"sid": 347072653161390
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Rover particles",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "every-tick",
							"objectClass": "System",
							"sid": 204176042526322
						}
					],
					"actions": [
						{
							"id": "pin-to-object-imagepoint",
							"objectClass": "ParticlesRightWheel",
							"sid": 185133189166106,
							"behaviorType": "Pin",
							"parameters": {
								"pin-to": "Rover",
								"image-point": "\"RightWheelPoint\"",
								"angle": true,
								"width-type": "no",
								"height-type": "no",
								"z": false
							}
						},
						{
							"id": "pin-to-object-imagepoint",
							"objectClass": "ParticlesLeftWheel",
							"sid": 101843316389045,
							"behaviorType": "Pin",
							"parameters": {
								"pin-to": "Rover",
								"image-point": "\"LeftWheelPoint\"",
								"angle": true,
								"width-type": "no",
								"height-type": "no",
								"z": false
							}
						},
						{
							"id": "pin-to-object-imagepoint",
							"objectClass": "ParticlesLeftWheelFront",
							"sid": 583217503868019,
							"behaviorType": "Pin",
							"parameters": {
								"pin-to": "Rover",
								"image-point": "\"LeftWheelPointFront\"",
								"angle": true,
								"width-type": "no",
								"height-type": "no",
								"z": false
							}
						},
						{
							"id": "pin-to-object-imagepoint",
							"objectClass": "ParticlesRightWheelFront",
							"sid": 667846934344084,
							"behaviorType": "Pin",
							"parameters": {
								"pin-to": "Rover",
								"image-point": "\"RightWheelPointFront\"",
								"angle": true,
								"width-type": "no",
								"height-type": "no",
								"z": false
							}
						},
						{
							"id": "move-to-bottom",
							"objectClass": "WheelParticles",
							"sid": 665371841507261
						}
					],
					"sid": 748988502032487
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-moving",
							"objectClass": "RoverPlaceholder",
							"sid": 394961411732328,
							"behaviorType": "MoveTo"
						},
						{
							"id": "trigger-once-while-true",
							"objectClass": "System",
							"sid": 891197569641737
						}
					],
					"actions": [
						{
							"id": "create-object",
							"objectClass": "System",
							"sid": 110180021223015,
							"parameters": {
								"object-to-create": "ParticlesLeftWheel",
								"layer": "\"Objects\"",
								"x": "0",
								"y": "0",
								"create-hierarchy": false
							}
						},
						{
							"id": "create-object",
							"objectClass": "System",
							"sid": 191053292699445,
							"parameters": {
								"object-to-create": "ParticlesLeftWheelFront",
								"layer": "\"Objects\"",
								"x": "0",
								"y": "0",
								"create-hierarchy": false
							}
						},
						{
							"id": "create-object",
							"objectClass": "System",
							"sid": 732379864557435,
							"parameters": {
								"object-to-create": "ParticlesRightWheel",
								"layer": "\"Objects\"",
								"x": "0",
								"y": "0",
								"create-hierarchy": false
							}
						},
						{
							"id": "create-object",
							"objectClass": "System",
							"sid": 846446649769071,
							"parameters": {
								"object-to-create": "ParticlesRightWheelFront",
								"layer": "\"Objects\"",
								"x": "0",
								"y": "0",
								"create-hierarchy": false
							}
						}
					],
					"sid": 156098248511015
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-moving",
							"objectClass": "RoverPlaceholder",
							"sid": 323335966574585,
							"behaviorType": "MoveTo",
							"isInverted": true
						},
						{
							"id": "every-tick",
							"objectClass": "System",
							"sid": 903419796039047
						}
					],
					"actions": [
						{
							"id": "set-opacity",
							"objectClass": "WheelParticles",
							"sid": 818174543304648,
							"parameters": {
								"opacity": "lerp(self.opacity,self.opacity-100,5*dt)"
							}
						}
					],
					"sid": 781390615040732
				}
			],
			"sid": 387087381016054
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Rover tracks",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-moving",
							"objectClass": "RoverPlaceholder",
							"sid": 642285710256493,
							"behaviorType": "MoveTo"
						},
						{
							"id": "every-tick",
							"objectClass": "System",
							"sid": 351027711825131
						}
					],
					"actions": [
						{
							"id": "create-object",
							"objectClass": "System",
							"sid": 591789622364616,
							"parameters": {
								"object-to-create": "TrackLeft",
								"layer": "\"Objects\"",
								"x": "Rover.ImagePointX(\"LeftWheelPoint\")",
								"y": "Rover.ImagePointY(\"LeftWheelPoint\")",
								"create-hierarchy": false
							}
						},
						{
							"id": "create-object",
							"objectClass": "System",
							"sid": 329511984395059,
							"parameters": {
								"object-to-create": "TrackRight",
								"layer": "\"Objects\"",
								"x": "Rover.ImagePointX(\"RightWheelPoint\")",
								"y": "Rover.ImagePointY(\"RightWheelPoint\")",
								"create-hierarchy": false
							}
						},
						{
							"id": "set-angle",
							"objectClass": "TrackLeft",
							"sid": 840426735958168,
							"parameters": {
								"angle": "Rover.Angle"
							}
						},
						{
							"id": "set-angle",
							"objectClass": "TrackRight",
							"sid": 392296138560249,
							"parameters": {
								"angle": "Rover.Angle"
							}
						},
						{
							"id": "move-to-bottom",
							"objectClass": "TrackLeft",
							"sid": 199171540337127
						},
						{
							"id": "move-to-bottom",
							"objectClass": "TrackRight",
							"sid": 870079612308010
						}
					],
					"sid": 425422573070335
				}
			],
			"sid": 588147220148797
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Rover Terrain Collision",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-hit-solid",
							"objectClass": "RoverPlaceholder",
							"sid": 175487086512658,
							"behaviorType": "MoveTo"
						},
						{
							"id": "is-tag-playing",
							"objectClass": "Audio",
							"sid": 742375530315971,
							"parameters": {
								"tag": "\"crashSound\""
							},
							"isInverted": true
						}
					],
					"actions": [
						{
							"id": "set-volume",
							"objectClass": "Audio",
							"sid": 365645971321098,
							"parameters": {
								"tag": "\"drivingsound\"",
								"db": "-Infinity"
							}
						},
						{
							"id": "set-animation",
							"objectClass": "Rover",
							"sid": 127190522303881,
							"parameters": {
								"animation": "\"still\"",
								"from": "current-frame"
							}
						},
						{
							"id": "play-by-name",
							"objectClass": "Audio",
							"sid": 933572777527704,
							"parameters": {
								"folder": "sounds",
								"audio-file-name": "choose(\"Crash1\", \"Crash2\", \"Crash3\")",
								"loop": "not-looping",
								"volume": "0",
								"tag-optional": "\"crashSound\""
							}
						}
					],
					"sid": 329954197970729
				}
			],
			"sid": 820785477135592
		}
	],
	"sid": 438801549688592
}